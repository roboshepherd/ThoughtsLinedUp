\chapter{Local Communication for Self-regulated MRTA}
\label{local-comm}
%%%%%%%%%%%%%%%%%%%%%
%\section{Introduction}

%%%%%%%%%%%%%%%%%%%%%
\section{Motivations}
%% FIG: COMM-THESIS
\begin{figure}
\centering
\includegraphics[width=9cm, angle=0]
{./dia-files/robot-comm-strategies.eps}
%figure caption is below the figure
\caption{\small Self-regulated communication strategy}
\label{fig:robot-comm-strategies} % Give a unique label
\end{figure}
\subsection*{Why MRTA based-on communication ?}
For the following reasons, we rely on communication among robot group to exploit our generic mechanism of division of labour.\\
Firstly, from our understanding of different kinds of communication strategies of biological social systems (Sec. \ref{bg:bio-comm}), this is obvious that the role of communication can not be ignored for achieving division of labour in MRS. Instead of being too much addicted to communication-less algorithms, perhaps due to the limitation of current communication technology (e.g. mimicking biological stigmergy), we need to exploit the existing state of the art in communication technology for developing functional and robust division of labour mechanisms for future MRS. By selecting a suitable communication strategy and enabling robots to self-regulate their certain behaviours, we can significantly reduce the communication load of a MRS.
Secondly, Whatever be the objectives of a target MRS under any research approach, e.g., maximizing robustness, scalability and/or task performance, the issue of task-allocation of an individual robot remains same, i.e., what task should it select at a particular time point considering dynamically changing task requirements, choices of peer robots and environmental conditions. In this issue, unlike traditional MRS approach, I emphasize on maintaining the overall group level performance and robustness, not just focusing on the instantaneous maximum benefit (or minimum cost) of a robot by performing a particular task.
Finally, by combining the above two points, we propose to achieve division of labour in MRS as a self-regulated task allocation process of a group of robots, where robots can dynamically select suitable tasks, or can switch from one task to another based on continuously sensed and communicated information of tasks, states etc. through their respective sensory and communication channels. Thus, by adopting this self-regulated task selection and communication strategies, some of the robots can have chances to specialize on some particular tasks, and as a whole, the system can maintain a level of plasticity without producing unnecessary communication burden on the system.
%%%%%%%%%%%%%%%%%%%%%
%\section{Geometrical analysis}

%%%%%%%%%%%%%%%%%%%%%
\section{A locality-based peer-to-peer communication model (LPCM)}
Our communication model relies on the local P2P communications among robots. Here there is no centralized server to disseminate information but each robot can communicate to its nearby peers within a certain communication radius, $r_{comm}$. Here by $r_{comm}$, we assume that within this distance robots can exchange communication signals reliably without any significant loss of information. A robot $R_1$ is a {\em peer} of robot $R_2$, if spatial distance between $R_1$ and $R_2$ is less than its $r_{comm}$. As shown in Fig. \ref{fig:lcm}, local communication can also give robots similar task information as in centralized communication mode. It shows that it is not necessary for each robot to communicate with every other robot to get information on all tasks. Since robots can random walk and explore the environment we assume that for a reasonably high robot to space density, all task will be known to all robots after an initial exploration period. In order to update the urgency of a task, robots can estimate the number of robots working on a task in many ways: such as, by using their sensory perception (e.g., camera), by doing local P2P communication and so on. In Fig. \ref{fig:lcm} we have shown that robots exchange both task information and self status signals to peers.\\
We characterize our communication model in terms of three fundamental issues: 1) message content ({\em what to communicate}) 2) communication frequency ({\em when to communicate}) and 3) target recipients ({\em with whom to communicate}) \cite{Gerkey}. In a typical MRS, message content can be categorized into two types: 1) state of each individual robot and 2) target task (goal) information \cite{Balch}. The latter can also be subdivided into two types: 1) an individual robot's target task information and 2) information of all available tasks found in the system. Regarding the first issue, our communication model is open. Robots can communicate with their peers with any kind of message. Our model addresses the last two issues very specifically. Robots communicate only when they meet their peers within a certain communication radius ($r_{comm}$). Although in case of an environment where robots move relatively faster the peer relationships can also be changed dynamically. But this can be manipulated by setting the signal frequency and robot to space density to somewhat reasonably higher value. In terms of target recipients, our model differs from a traditional publish/subscribe communication (PSC) model by introducing the concept of dynamic subscription. In a traditional PSC model, subscription of messages happens prior to the actual message transmission. In that case prior knowledge about the subjects of a system is necessary. But in our model this is not necessary as long as all robots uses a common addressing convention for naming their incoming signal channels. In this way, when a robot meets with another robot it can infer the address of this peer robot's channel name by using a shared rule. A robot is thus always listening to its own channel for receiving messages from its potential peers or message publishers. On the other side, upon recognizing a peer a robot sends a message to this particular peer. So here neither it is necessary to create any custom subject namespace (e.g., \cite{Gerkey}) nor we need to hard-code information in each robot controller about the knowledge of their potential peers {\em a priori}. Subscription is done automatically based on their respective $r_{comm}$.
%%%%%%%%%%%%%%%%%%%%%
\section{Implementation algorithm}
Our local communication model has three major aspects: 1) local sensing of peers (and optionally tasks), 2) listening to peer signals and 3) emitting signals for peers. Here we present a typical implementation.
Let N be the set of robots. At time step q, a robot $i$ that can receive $h_{i,q}$ information by listening to its incoming channel $L_i$. Let M be the set of tasks. Each task $j$ has an associated information $H_j$. It encodes the necessary properties of tasks, such as their locations, urgencies etc. Each task $j$ also has a task perception radius $r_{task}$ such that if a robot comes within this radius at time step q it can perceive current value of $H_{j,q}$. Let at time step q, robot $i$ has its own task information $G_{i, q}$ that has been perceived and listened from its peers. Let $r_{comm}$ be the communication radius of each robot. Let at time step q, $P_{p, q}^{i}$ be a set of peers of $i$ that are within $r_{comm}^{i}$. Let $E_{p, q}^{i}$ be its active signal emission channels. Algorithm 1
implements our proposed dynamic P2P communication.\\  

\textbf{\small Algorithm 1: Locality based Dynamic P2P Communication}
\begin{algorithmic}[1]
\label{alg:p2p-comm}
\State $\textbf{Initialization:}$
\State $id \gets robotid$
\State $r_{comm} \gets r_1$
\State $r_{task} \gets r_2$
\State $pose[id] \gets (0, 0, 0)$
\State $G[id], ~P[id], ~L[id], ~E[~] \gets 0$
\State $\textbf{Loop:}$
\State $pose[id] \gets (x, y, \theta)$
% PERCEPTION of TASK
\If {$pose[id] \in U(pose[k],~ r_{task}^{k}), (k = 0, 1, …., M-1)$} 
\State $G[id] \gets G[id] ~\cup ~ H_k$
\EndIf
% P2P Interaction, listen signal
\If {$pose[id] \in V(pose[k],~ r_{comm}^{k}), (k = 0, 1, …., N-1, k\neq id )$} 
\State $P[id] \gets P[id] ~ \cup ~ k$
\State $h_k \gets W(E[k],~ L[id])$
\State $G[id] \gets G[id] ~ \cup ~ h_k$
\EndIf
% P2P Interaction, emit signal
\ForAll {$ k \in P[id], (k = 0, 1, …., N-1, k\neq id)$}
\State $ W(E[id],~L[k]) \gets G[id]$
\EndFor
\State $P[id] \gets 0$
\State $\textbf{Loop again}$
\end{algorithmic}
%\addtolength{\floatsep}{-25mm}
%
From Algorithm 1, we see that a robot controller is initialized with its specific robot-id and default values of $r_{comm}$ and $r_{task}$. We assumed that these values are same for all robots and for all tasks respectively.
Initially a robot has no information about tasks. It has neither listened nor transmitted any information yet. Upon initialization, robot determines its current pose and evaluates a function $U(pose,~ r_{task})$ that helps it to perceive information of a nearby task. This is not strictly necessary as this information can be available from alternate sources. In second step, robot senses its nearby peers by evaluating $V(pose,~ r_{comm})$ and start filling the list of peers $P$ by their id. The signal exchange with a peer is denoted by a communication function $W(emitter,~listener)$. So by listening to a peer signal, it receives task information $h$ and aggregates this $h$ with its own task info $G$. In last step, robot emits its task information to its peers stored in $P$. Finally it erases all values of $P$ and repeat this loop. 
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Experiment Design}
\label{sec:expt-design}
In this section, we have described the design of parameters and observables of our experiments.
These experiments are designed to validate AFM by testing the occurrence of convergent MRTA. Table \ref{table:params} lists a set of essential parameters of our experiments. 
%
\begin{table}
\caption{Experimental parameters}
\label{table:params}
\begin{center}
\begin{tabular}{|l||c|}
\hline Parameter & Value\\
\hline Total number of robots ($N$) & 16\\
\hline Total number of tasks ($M$) & 4\\
\hline Experiment area ($A$) & 4 $m^2$\\
\hline Intial task urgency ($\Phi_{INIT}$) & 0.5\\
\hline Task urgency increase rate ($\Delta\phi_{INC}$) & 0.005\\
\hline Task urgency decrease rate ($\Delta\phi_{DEC}$) & 0.0025\\
\hline Intial sensitization ($K_{INIT}$) & 0.1\\
\hline Sensitization increase rate ($\Delta k_{INC}$) & 0.03\\
\hline Sensitization decrease rate ($\Delta k_{DEC}$) & 0.01\\
\hline A very small distance ($\delta$)& 0.000001\\
\hline Task info update interval ($\Delta TS_{u}$) & 5s\\
\hline Task info signal emission interval ($ \Delta TS_{e}$)& 2.5s\\
\hline Robot's task time-out interval ($\Delta RT_{to} $)& 10s\\
\hline
\end{tabular}
\end{center}
\end{table}
\subsection{Parameters}
We intend to have a setup that is relatively complex, i.e., a high number of robots and tasks in a large area, but with a high probability of convergence. The following criteria shows our rationale behind our selected parameters.
%
\begin{itemize}
\item Robots should be capable of moving at a reasonably high speed (e.g., $\geq 4 cm/s$) without interfering to each other very much.
\item Tasks density should be as least one task per square meter.
\item Host PC to robot communication should be as dedicated and stable as possible.
\item No task should be left unattended completely for a long time (e.g., $\geq 300s $).
\end{itemize}
%
When many Bluetooth devices talk to a single Bluetooth adapter, communication delays become very frequent due to the fact that each device gets a guaranteed turn to communicate \cite{Bluetooth}. After some initial testing, we found a stable server configuration with 8 Bluetooth adapters, i.e., one Bluetooth adapter is used to communicate with two robots. This limits us to set the total number of robots to 16. Also we found that after about 35-40 minutes from the start of our experiments some of robots fail to get the access to their designated Bluetooth adapters. So we limit the length of our experiments to 40 minutes. We expect that this limitation would be removed by distributing Bluetooth adapters among multiple server PCs.\\ 
The diameter of the marker of our E-puck robot is 8cm. So, if we put 4 robots in an area of one square meter, this will give us a robot-occupied-space to free-space ratio of about 1:49 per square meter. We have found that this ratio is reasonable to allow the robots to move at a speed of 7.5 cm/sec without much interference to each other. We randomly placed four 18.5 cm x 11.5 cm rectangular boxes as a shop task in our experiment arena. They were about one meter apart from each other.\\
The initial values of task urgencies can be set to any value as long as they are same for all tasks. We choose a limit of 0 and 1, where 0 means no urgency and 1 means maximum urgency. Same applies to sensitisation as well, where 0 means no sensitisation and 1 means maximum sensitisation. We choose a default sensitization value of 0.1 for all tasks. Our rationale behind selecting task urgency and sensitisation change rates can be found in \cite{Sarker}.
%The following relationships are maintained for selecting task-urgency and sensitization parameters.
%
%\begin{equation}
%\Delta\phi_{INC} = \frac{\Delta\phi_{DEC} \times N}{2 \times M}
%\label{eqn:task-urgency}
%\end{equation}
%%
%\begin{equation}
%\Delta k_{DEC} = \frac{\Delta k_{INC}} {M - 1} 
%\label{eqn:sensitization}
%\end{equation}
%%
%Eq. \ref{eqn:task-urgency} establishes the fact that task urgency will increase at a higher rate than that of its decrease. As we do not like to keep a task left unattended for a long time we choose a higher rate of increase of task urgency. This difference is set on the basis of our assumption that at least half of the expected number of robots (ratio of number of robots to tasks) would be available to work on a task. \\
%Eq. \ref{eqn:sensitization} suggests that the learning will happen much faster than the forgetting. The difference in these two rates is based on the fact that faster leaning gives a robot more chances to stick on to it. The exact ratio of learning and forgetting is related here by the fact that if a robot works on a task it learns about it and forgets about the rest. 
\subsection{Observables}
We have defined a set of observables to benchmark our implementation. They are briefly explained here.\\
\textbf{Changes in task-urgencies ($\Delta \Phi$): }
In our experiments, urgency of each task in each step has been logged. From the above design of task urgency, we can see that if a task is not served by any robot for 100 consecutive steps (500s), urgency of that task will reach from 0.5 to its maximum value 1.0. On the other hand, if a task is served by only one robot for 200 consecutive steps (1000s) urgency of that task will be 0. But in real experiment, it is more likely that more than one robot will serve a task. So urgency of a task will decrease $\Delta\phi_{DEC}$ times number of working robots on that task (based on AFM guidelines \cite{Elsa}). The overall changes in task urgencies will show the convergence behaviour of our system.\\
\textbf{Changes in robot sensitizations ($\Delta K$): }
According AFM, as robots will do tasks they will specialize on each task by increasing or decreasing sensitizations (learning and forgetting). From our above design, we can see that if a robot starts doing a task with an initial sensitization of 0.1 and it repeatedly does it for 30 consecutive steps, sensitization will reach to 1. Thus by logging the sensitization data of each robots we will be able to comment on task specializations of robots.\\
\textbf{Changes in robot motions ($\Delta U$): }
As we might guess that initially the task urgencies will be relatively higher for all tasks so robots will need to do a lot of movements by switching from one task to another. But as the system approaches to converge overall robot motions will be decreased. In order to observe this phenomena we log the pose of robots in every time step.\\
\textbf{D-Bus Signals emitted by Task server ($S_f$):} 
In order to measure the communication load on our communication system we are also interested to log P2P TaskInfo D-Bus signals. Since the emission of signals happens asynchronously it is more likely that the overall communication load on the system will vary over time. This is contrary to the centralized communication where communication load is almost constant over time.
%%========================================================================
\section{Implementation}
\label{sec:impl}
\begin{figure}
\centering
\includegraphics[width=9cm, angle=0]
{./dia-files/RIL-Expt-Setup2.eps}
%figure caption is below the figure
\caption{\small Hardware and software setup}
\label{fig:setup} % Give a unique label
\end{figure}
We have developed a system where up to 40 E-puck robots \cite{Epuck} can operate together according to the generic rules of the AFM. As shown in Fig. \ref{fig:setup} (right), our software system consists of a multi-robot tracking system, a task perception assistant (TPA) and robot controller clients (RCC). Here at first we have presented the design of our communication system. Then we have discussed about our specific MRS implementation. 
%%%
\subsection{Communication system under LPCM}
As shown in Fig. \ref{fig:setup}, RCCs disseminate task information to each other by \textit{TaskInfo} D-Bus signal. The contents of task information are physical locations of tasks and their urgencies. However as our robots are incapable of sensing task directly. So it relies on TPA for actual task location and urgency. When a robot $i$ comes within $r_{task}$ of a task $j$, SwisTrack reports it to TPA (by {\em TaskNeighbors} signal) and TPA then gives it current task information $H_j$ to $i$ (by {\em TaskInfo} signal).
TPA has another interface for catching feedback signals from robots. The \textit{RobotStatus} signal can be used to inform TPA about a robot's current task id, its device status and so on. TPA uses this information to update relevant part of task information such as, task-urgency. This up-to-date information is encoded in next TaskInfo signal.\\
%In Fig. \ref{fig:lcm} an initial configuration of our communication system has been presented. Upon receiving an initial TaskInfo signal from TPA, robot $R_3$ has shown strong attraction towards $Task1$ and robot $R_2$ has shown strong attraction toward $Task2$. However $R_1$ receives information about both tasks through its peer $R_3$ and shows strong attraction towrads Task1. These can be inferred from Eq. \ref{eqn1} that says if the initial task urgencies and sensitizations for all tasks are same, a robot will strongly be attracted towards a task that is relatively closer to it.
\subsection{MRS implementation}
In order to track all robots real-time we have used SwisTrack \cite{SwisTrack}, a state of the art open-source, multi-agent tracking system, with a16-megapixel overhead GigE camera. This set-up gives us the position, heading and id of each of the robots at a frequency of 1. The interaction of the hardware and software of our system is illustrated in Fig. \ref{fig:setup}. \\
For IPC, we have used D-Bus technology. %\footnote{http://dbus.freedesktop.org/doc/dbus-specification.html}. 
We have developed an IPC component for SwisTrack (hereafter called as \textit{SwisTrack D-Bus Server}) that can broadcast id and pose of all robots in real-time over our server's D-Bus interface.\\
Apart from SwisTrack, we have implemented two major software modules: {\em Task Perception Assistant (TPA)} and {\em Robot Controller Client (RCC)}. They are developed in Python with its state of the art \textit{Multiprocessing} \footnote{http://docs.python.org/library/multiprocessing.html} module. This python module simplifies our need to manage data sharing and synchronization among different sub-processes. As shown in Fig. \ref{fig:setup}, RCC consists of four sub-processes. {\em SignalListener} and {\em SignalEmitter}, interface with SwisTrack D-Bus Server and TPA. {\em TaskSelector} implements AFM guidelines for task selection . {\em DeviceController} moves a robot to a target task. Bluetooth radio link is used as a communication medium between a RCC and a corresponding E-puck robot. 
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Results and discussions}
\label{sec:results}
%%
In this section we have presented our experimental results. We ran those experiments for about 40 minutes and averaged them from three iterations. For comparison purposes, here we present some of the results of our baseline experiments in centralized communication mode. Details can be found in \cite{Sarker}.\\
%%% raw urgencies
\begin{figure}
\centering
\includegraphics[height=5cm]
{images/local-500cm/PlotUrgencyLog-2010Feb15-171017.eps}
%figure caption is below the figure
\caption{\small Task urgencies observed at TaskServer in local mode $r_{comm}$=0.5m}
\label{fig:raw-urgencies} % Give a unique label
\end{figure}
%%%
Fig. \ref{fig:raw-urgencies} shows the dynamic changes in task urgencies.
In order to describe our system's dynamic behaviour holistically we analyse the changes in task urgencies over time. Let $ \phi_{j, q}$ be the urgency of a task $j$ at $q^{th}$ step. In $(q+1)^{th}$ step, we can find the change of urgency of task $j$ :\\
\begin{equation} 
\small
\delta \phi_{j, q+1} = ( \phi_{j, q+1} - \phi_{j, q}) 
\end{equation}
So we can calculate the sum of changes in urgencies of all tasks at $(q+1)^{th}$ step:
\begin{equation} 
\small
\Delta \Phi_{j, q+1} = \sum_{j=1}^{M} \delta \phi_{j, q+1} 
\label{eqn:Delta-Phi}
\end{equation}
Fig. \ref{fig:urgency-convergence} plots this sum of changes of task urgencies by a dashed line. If we consider the absolute change over a window of time $w$ in the following equation, we can describe the overall changes of our systems in both positive and negative directions.
%
\begin{equation}
\small
\Delta \Phi_{jw, q+1} = \sum_{j=0}^{w-1} \mid \Delta \Phi_{q+j} \mid
\end{equation}
%
In order to find convergence in MRTA we have calculated the sum of absolute changes in task urgencies over a window of 2 consecutive steps (100s). This is plotted in solid line in Fig. \ref{fig:urgency-convergence}. Note that we scale down the time steps of this plot by aggregating the values of 10 consecutive steps (50s) of Fig. \ref{fig:raw-urgencies} into a single step value.
From Fig. \ref{fig:urgency-convergence} we can see that initially the sum of changes of task urgencies are towards negative direction. This implies that tasks are being served by a high number of robots. When the task urgencies stabilize near zero the fluctuations in urgencies become minimum. Since robots chose tasks stochastically, there will always be a small changes in task urgencies. A potential convergence point is located by considering the persistence existence of the value of $\Delta \Phi_{jw, q+1}$ below a threshold 0.1. Tn Fig. \ref{fig:urgency-convergence} this convergence happens near step 23 or after 1150s from the beginning of our experiments. This implies that from this point of time and onwards, changes of our system's behaviour remain under a small threshold value.\\
Using this same criteria, we can find that in local communication experiment convergence happens after step 14 in case of $r_{comm}$=0.5m (Fig. \ref{fig:local50cm-convergence}) and after step 29 in case of $r_{comm}$=1m (Fig. \ref{fig:local1m-convergence}).\\ 
%%%%
%%%% Centralized expt
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/global/TaskUrgencyConvergence-step2-th-p1}
\caption{\small Convergence of task urgencies in centralized mode}
\label{fig:urgency-convergence} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/global/DeltaTranslationStat.eps}
\caption{\small Sum of translations of all robots in centralized  mode }
\label{fig:translation-stat} % Give a unique label
\end{minipage}
\end{figure*}
%%
%%
%%%%% Task Urgency Convergence/ Traslation local 50cm
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]
{images/local-500cm/Local50cm-TaskUrgencyConvergence.eps}
%figure caption is below the figure
\caption{\small Convergence of task urgencies in local mode $r_{comm}$=0.5m}
\label{fig:local50cm-convergence} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]
{images/local-500cm/DeltaTranslationStat.eps}
%figure caption is below the figure
\caption{\small Sum of translations of all robots in local mode $r_{comm}$=0.5m }
\label{fig:local50cm-tr} % Give a unique label
\end{minipage}
\end{figure*}
%%
%%%%% Task Urgency Convergence/ Traslation local local 1m %%%
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-1m/TaskUrgencyConvergence-1m.eps}
\caption{\small Convergence of task urgencies in local mode $r_{comm}$=1m}
\label{fig:local1m-convergence} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-1m/DeltaTranslationStat.eps}
\caption{\small Sum of translations of all robots in local mode $r_{comm}$=1m }
\label{fig:local1m-tr} % Give a unique label
\end{minipage}
\end{figure*}
%%
%%% Sensitization%%%
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]
{images/local-500cm/RobotSensitizationStat-Total-50steps.eps}
%figure caption is below the figure
\caption{\small Changes in sensitizations  in local mode $r_{comm}$=0.5m}
\label{fig:local50cm-sensitization-stat} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-1m/RobotSensitizationStat-Total-50steps.eps}
\caption{\small Changes in sensitizations  in local mode $r_{comm}$=1m}
\label{fig:local1m-sz} % Give a unique label
\end{minipage}
\end{figure*}
%%
We have aggregated the changes in translation motion of all robots over time. Let $u_{i,q}$ and $u_{i,q+1}$ be the translations of a robot $i$ in two consecutive steps. If the difference between these two translations be $\delta u_{i}$, we can find the sum of changes of translations of all robots in $(q+1)^{th}$ step using the following equation.
\begin{equation}
\small 
\Delta U_{q+1} = \sum_{i=1}^{N} \delta u_{i, q+1} 
\label{eqn:Delta-Tr}
\end{equation}
The result from centralized communication experiment is plotted in Fig. \ref{fig:translation-stat}. In this plot we can see that robot translations also vary over varying task requirements of tasks. But it fails to show a consistence behaviour like previous plots. The robot translation results from local mode experiments are plotted in Fig. \ref{fig:local50cm-tr} and Fig. \ref{fig:local1m-tr}. The reduction of robot translation is significant in both local communication experiments.\\
%
%%% Sensitization
Similar to Eq. \ref{eqn:Delta-Phi}, we can calculate the absolute sum of changes in sensitizations by all robots in the following equation.
% 
\begin{equation}
\small 
\Delta K_{j, q+1} = \sum_{j=1}^{M} \mid \Delta k_{j, q+1} \mid
\label{eqn:Delta-K}
\end{equation}
This values of $\Delta K$ from local experiments are plotted in Fig.~\ref{fig:local50cm-sensitization-stat} and Fig.~\ref{fig:local1m-sz}. They show that the overall rate of learning and forgetting decrease over time. It is a consequence of the gradually increased task specializations of robots.\\
%%%% Single robot- number of peers
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-500cm/Robot12-16feb-1-LocalSignals.eps}
\caption{\small Peer signals caught by Robot12 in local mode $r_{comm}$=0.5m}
\label{fig:local50cm-single-robot-signal}% Give a unique label
\end{minipage} 
%%%
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-1m/Robot12-17feb-3-LocalSignals.eps}
\caption{\small Peer signals caught by Robot12 in local mode $r_{comm}$=1m}
\label{fig:local1m-single-robot-signal} % Give a unique label
\end{minipage}
\end{figure*}
%%% Communication load %%%
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]
{images/local-500cm/Local-500cm-SignalingFreqStat.eps}
\caption{\small Frequency of P2P signalling in local mode $r_{comm}$=0.5m}
\label{fig:local50cm-signal-frequency-stat} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-1m/Local-1m-SignalingFreqStat.eps}
\caption{\small Frequency of P2P signalling in local mode $r_{comm}$=1m}
\label{fig:local1cm-signal-frequency-stat} % Give a unique label
\end{minipage}
\end{figure*}
%
%%
As an example of P2P signal reception of a robot, Fig. \ref{fig:local50cm-single-robot-signal} and Fig. \ref{fig:local1m-single-robot-signal} show the number of received signals by Robot12 in two local experiments. It states the relative difference of peers over time in two local cases. The overall P2P task information signals of both of these local modes are plotted in Fig. \ref{fig:local50cm-signal-frequency-stat} and Fig. \ref{fig:local1cm-signal-frequency-stat}. Note that in centralized communication mode the task info signal frequency was kept 20 signals per time step \cite{Sarker}.\\ 
%%%% Single- robot sensitization and translation
\begin{figure*}
\begin{minipage}[t]{0.5\linewidth}
\centering
\includegraphics[height=5cm]{images/local-500cm/PlotRobot12-Sensitizations-2010Feb16-150432.eps}
\caption{\small Task specialization of Robot12 in local mode $r_{comm}$=0.5m}
\label{fig:single-robot-sensitizations} % Give a unique label
\end{minipage} 
%%%
\begin{minipage}[t]{0.5\linewidth}
\centering
%\includegraphics[height=5cm]
%{images/local-500cm/DeltaRobot12-PoseAtTS-2010Feb16-150432.eps}
\caption{\small Changes in translation of Robot12 in local mode $r_{comm}$=0.5m}
\label{fig:single-robot-translation} % Give a unique label
\end{minipage}
\end{figure*}
%%%%
As an example of task specialization of a robot we plotted sensitization of Robot12 in Fig. \ref{fig:single-robot-sensitizations}. It shows that this robot has specialized in Task1. The continuous learning of Task1 happens from step 23 to step 59 where it has learned this task completely. This behaviour was found common in all robots with varying level of sensitizations. Hence we get the linear decrease of $\Delta K$ in sensitization plots. However, the changes in motion of this robot plotted in Fig. \ref{fig:single-robot-translation} was not stable due to the fact that robots frequently avoid dynamic obstacles and select random-walking.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Related Works}
\label{sec:bg}
Krieger and Billeter presented MRTA in a team of 12 robots in ants' foraging scenario where a central server sent broadcast message containing energy level of the colony to all robots \cite{Krieger}. They also applied a form of indirect communication in order to share information about discovered food sources among robots. Although this P2P communication did not happen in real time, it improved the robustness of peer recruitment when compared with centralized communication only. Agassounon and Martinoli compared three task-allocation algorithms using simulations and reported that algorithm that used information sharing among local peers became robust in worker allocation \cite{Agassounon}. However, environment condition should be known {\em a priori} to optimize some parameters. By modulating the transmission power of local on-board wireless device of E-puck robots, Cianci {\em et al.} enabled them to communicate in different local radii \cite{Cianci}. In a self-organized decision making experiment, decision of 15 robots converged faster when local communication radius was relatively higher. Since the number of tasks was only two (left or right wall following), robots got global view of the system with increased communication radius. Thus they agreed quickly in one task.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Summary and conclusion}
\label{sec:conc}
We presented a locality based dynamic P2P communication model that achieves similar or better self-regulated multi-robot task allocation (MRTA) than its centralized counterpart. Particularly the reduction in robot movement states that local model is preferable when we need to minimize robot energy usage. Our model assumes no prior knowledge of the environment and it also does not depend on the number of the robots. We presented an abstract algorithm that can be used with various P2P communication technologies. We reported our implementation of this algorithm   by using  D-Bus technology in Linux. Comparative results from local mode experiments shows us that robots relatively perform better when the radius of communication is such small that most of the robots only communicate with their closest peers. This is contrary to the findings from \cite{Rutishauser, Epuck} where increased amount of information help to get desired task-allocation quickly. In our case, more information exchange with larger communication radius or with centralized communication increased task switching among robots. In case of local information exchange, robots have more chances to select local tasks by the virtue of self-regulating principles. Thus in local communication mode our system converged better and significantly reduced robot motions.\\ 
Our future work include performing more experiments with increased number of robots (up to 40) and tasks. Since our existing Bluetooth communication setup with one server fail to scale we are looking forward to distribute communication loads over a network cluster of tens of servers.