\chapter{Validation of Attractive Field Model for Self-regulated MRTA}
\label{afm}
%%%%%%%%%%%%%%%%%%%%%
\section{Motivations}
In this chapter we have discussed about the attractive field model (AFM) \cite{Arcaute+2008} an interdisciplinary model of self-regulated task-allocation or division of labour (DOL) in social systems. The model has been originated from the EPSRC collaborative project ``Defying the rules â€“ how self-organizing systems work''. Under this project,  we have studied three different social systems: ants, humans and robots in order to identify generic mechanisms that lead sustainability of social systems through self-regulation \footnote{The partners of this project were from University of West of England, University of Hull, University of Wales, Newport and Imperial College London and they researched on ants, humans, robots and mathematical models respectively}. The idea of finding a generic model of DOL, by collaboratively  studying these social systems, has many fascinating advantages.\\
Firstly, this interdisciplinary study makes it possible to develop a generic model of self-regulatory DOL by combining the strengths of different disciplines overcoming their individual shortcomings. For example, ant colonies are the ideal example for studying the self-regulatory social systems, however it is very difficult to pin-point the exact mechanism leading to a specific behaviour \cite{Arcaute+2008}. Artificial systems e.g.  MRS can be used to explore and verify biological hypotheses using totally controlled experiments. Similarly observational data from human social systems can be combined with the data from the biological experiments to enhance our understanding of social self-regulatory mechanisms.\\ 
Secondly, synergy of different methods, experimental and observational data from disparate disciplines gives us the ability to construct a more abstract, yet powerful, model which may not be available through independent studies. The higher-level abstraction can be very helpful to increase the usefulness of this model since we can easily separate generic and the domain-specific components of the model. Generic part guides us to design a core-framework that can be used to create basic characteristics of a system, whereas domain-specific part can be implemented independent of other disciplines. For example,different social systems use different communication mechanisms, yet almost all of them share many common aspects in their self-regulatory behaviours (see Sec. \ref{bg:bio-comm} for an example). \\
Thirdly,  the scope of application of our generic models has been extended in many folds by tackling the common challenges of different disciplines. For example, both human social organizations and multi-robot systems suffer from the scalability issue for large organization. The properties of local sensing and local communication with relatively incapable sensory organs/hardware are present in both ants and swarm robotic systems. Thus, the integration of solutions from three major disciplines gives us a highly flexible and extensible model of DOL.\\
The construction of AFM has been achieved through a series of collaborative interactions among all project partners. From the biological experiments of ants colonies {\em Temnothorax albipennis} we  inferred the bottom-level rules and roles of feedback in collective performance of ants brood-sorting and nest construction after emigration to a new site. We  also analysed the observational data from the self-organized infrastructural development of an {\em eco-village} by an open community of volunteers resided in Ireland. These helped us to identify the generic rules of DOL in social systems. Later on, we  formalized these generic rules into AFM \cite{Arcaute+2008} and validated them by putting AFM into our robot controllers within the context of a virtual manufacturing shop-floor scenario.  In this chapter, we have described mainly the later part of our study, i.e. robotic validation of AFM, with a brief presentation on interpretations of AFM from different social perspectives.
\subsection*{Why communication-based DOL ?}
For the following reasons, we rely on communication among robot group to exploit our generic mechanism of division of labour.\\
Firstly, from our understanding of different kinds of communication strategies of biological social systems (Sec. \ref{bg:bio-comm}), this is obvious that the role of communication can not be ignored for achieving division of labour in MRS. Instead of being too much addicted to communication-less algorithms, perhaps due to the limitation of current communication technology (e.g. mimicking biological stigmergy), we need to exploit the existing state of the art in communication technology for developing functional and robust division of labour mechanisms for future MRS. By selecting a suitable communication strategy and enabling robots to self-regulate their certain behaviours, we can significantly reduce the communication load of a MRS.
Secondly, Whatever be the objectives of a target MRS under any research approach, e.g., maximizing robustness, scalability and/or task performance, the issue of task-allocation of an individual robot remains same, i.e., what task should it select at a particular time point considering dynamically changing task requirements, choices of peer robots and environmental conditions. In this issue, unlike traditional MRS approach, I emphasize on maintaining the overall group level performance and robustness, not just focusing on the instantaneous maximum benefit (or minimum cost) of a robot by performing a particular task.
Finally, by combining the above two points, we propose to achieve division of labour in MRS as a self-regulated task allocation process of a group of robots, where robots can dynamically select suitable tasks, or can switch from one task to another based on continuously sensed and communicated information of tasks, states etc. through their respective sensory and communication channels. Thus, by adopting this self-regulated task selection and communication strategies, some of the robots can have chances to specialize on some particular tasks, and as a whole, the system can maintain a level of plasticity without producing unnecessary communication burden on the system.

\section{The Attractive Field Model (AFM)}
\label{sec:model}
\subsection{Generic framework}
Inspired from the DOL in ants, humans and robots,  we  have proposed the following four rules that are the necessary ingredients to obtain self-regulation in any social system. In this dissertation, these rules are mentioned as {\em generic rules of division of labour}. \\
Rule 1: Continuous flow of information. Self-regulatory systems need to establish the continuous minimum flow of information over period of time, where self-regulation can be defined, for at least two states of an agent: 1) receiving information about task(s) and 2) ignoring information or doing no task. The updated information will reflect  the changes of the system i.e. it will encode the necessary feedback for the agents. Thus, this property will act as the basis of the smooth switching of states, between these two minimum states or, among multiple states (e.g. in case of multiple tasks or many sub-states of a single task) .\\
Rule 2: Sensitization. Self-regulatory systems allow the differentiation in use of  or access to information, e.g. through sensitization or learning tasks. This differentiation is regulated by the characteristics of the system, e.g. the ability of the agents to learn tasks that are repeatedly performed.\\
Rule 3: Concurrence. Self-regulatory systems include concurrent access to information from different spatial positions with certain preferences. This preference is not fixed and can changes with the dynamics of the system. \\
Rule 4: Forgetting. Self-regulatory systems include forgetting, e.g. the ability of agents to diminish information over time, if not used. The system determines the amount of info being released, and this changes with time. For example, specialists might have to attend an emergency situation and switch tasks that contributes to the forgetting of old task experiences. This is considered as crucial to allow flexibility in the system.\\
Having this general framework of self-regulation, we can now formalize AFM that will describe the properties of individual  agents and the system as a whole. In terms of networks, the model is a bipartite network, meaning that there are two different types of nodes. One set of nodes describes the sources of the attractive fields and the other set describes the agents. Links only exist between different types of nodes and they encode the flow of information so that, even if there is no direct link between two agents, their interaction is taken into account in the information flow (i.e. existence of {\em weak} interaction). The strength of the field depends on the distance between the task and the agent. This relationship is represented using weighted links. In addition, there is a permanent field that represents the no-task or  option for ignoring information. The model can be mapped to a network as shown in Fig. \ref{fig:afm}. The correspondence is given below:
\begin{enumerate}
\item Source nodes (o) are tasks that can be divided between a number of agents.
\item Agent nodes (x) an be ants, human,  robots etc.
\item The attractive fields correspond to stimuli to perform a task, and these are given by the black solid lines.
\item When an agent performs a task, the link is of a different sort, and this is denoted in the figure by a dashed line. Agents linked to a source by a red line are the agents currently doing that task. 
\item The field of ignoring the information (w) corresponds to the stimulus to random walk, i.e. the no-task option, and this is denoted by the dotted lines in the graph. 
\item Each of the links is weighted. The value of this weight describes the strength of the stimulus that the agent experiences. In a spatial representation of the model, it is easy to see that the strength of the field depends on the physical distance of the agent to the source. In addition, the strength can be increased through sensitisation of the agent via experience (learning). This distance is not depicted in the network, it is represented through the weights of the links . In the figure of the network, the nodes have an arbitrary place. Note that even though the distance is physical in this case, the distance in the model applied to other systems, needs not to be physical, it can represent the accessibility to the information, the time the information takes to reach the receiver, etc. 
\end{enumerate}
In summary, looking at the network, we see that each of the agents is connected to each of the fields. This means that even if an agent is currently involved in a task, the probability that it stops doing it in order to pursue a different task, or to random walk, is always non-zero. The weighted links express the probability of an agent to be attracted to each of the fields.
%%
\begin{figure}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4cm, angle=0]{./images/AFM-Diag2.eps}
%figure caption is below the figur
\caption{\small Attractive Filed Model (AFM)}
\label{fig:afm} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4cm, angle=0]{./images/CentralizedComm.eps}
\caption{\small A centralized communication scheme} % for implementing AFM}
\label{fig:ccm} % Give a unique label
\end{minipage}
\end{figure}
%%
\subsection{Relationship of AFM with self-organization}
\begin{figure}
\centering
\includegraphics[width=9cm, angle=0]
{./images/dia-files/self-org-2.eps}
%figure caption is below the figure
\caption{\small Four generic rules establish the self-regulated DOL in social systems}
\label{fig:mrs-comm-strategies} % Give a unique label
\end{figure}

It is interesting to note that our proposed four generic rules has become the four major corners of the foundation of a self-organized system (Fig.  \ref{fig:self-org-2}). As discussed in Sec. \ref{bg:self-reg},  self-organized systems exhibit four distinct perspectives known as so-called ingredients or properties of self-organization. However, it is not clear how those properties can come into existence. Here, we describe the four underlying mechanisms that explains how self-organization can be realized in different social systems. From our understanding, we can explain it in the following ways.\\ 
Firstly, multiple interaction becomes meaningful when {\em continuous flow of information} occurs  by exchanging signals or cues among agents or their environment  that regulates their behaviours. This, in turn, contribute to the task-allocation  and switching in the social level.  In the biological and swarm-intelligence (SI) literature, multiple interactions are often described as an essential ingredient of self-organization. However, random interaction without any definite purpose may not contribute to self-organization at all.\\
Secondly, in SI positive feedback has been attributed as another mechanism of  self-organization. But it is not easy to understand what creates positive feedback in a social system. Possible answers might be the characteristic of the environment (e.g., ants select shorter path since density of pheromones becomes higher and thus more ants becomes attracted in that path), the decrease of response-threshold of individuals (thus increase of probability of selecting a task) etc.  To make the answer more concrete, we have explicitly attributed {\em sensitisation} or learning as a mechanism of positive feedback. There might exist other mechanisms too. But clearly sensitisation will be one of the reliable mechanisms for achieving positive feedback.\\
Thirdly, similar to positive feedback, we have proposed {\em forgetting} that contributes to provide negative feedback about a task or decreasing the probability to select it. Other negative feedback mechanisms can be implemented by assigning a saturation level to each task which is also present in our model \cite{Arcaute+2008}.\\
Finally, creating  artificial amplification of fluctuations or stochastic events is not a straight-forward issue. It throws  many open questions. Does a system designer intentionally impose irregularity in task-performance of agents ?  Is random movement  enough for simulating randomness in a system ?
Since emergencies do not always pop-up on request, we provide the rule of {\em concurrency} that enables agents to  maintain even a small amount of probability of selecting a low-priority or less sensitized or distant task. This concurrency mechanism provides a high-degree of robustness in the system such that all tasks can be attended even if specialization of agents delays them in switching to some tasks.
%% 
 \subsection{Interpretation of AFM  in an ant colony}
The interpretation of AFM in an ant colony almost exactly follows the above generic interpretation. Moreover it also reveals a few additional characteristics of AFM. For example, at the individual level, information is processed differently by each individual, and is certainly not constant nor continuous. In addition, there are lower and upper thresholds on the amount of info necessary for DOL to take place. The time scale at the individual level is very small compared to the system level's time scale, and since it is this latter time scale that we are interested in, we can approximate the propagation of information at this macro time scale to a continuous.  In the model emphasize is given to whether the information is used e.g. stimulation to perform a task, or unused e.g. random walk (RW).
In case of sensitization or learning, there is no encoding of individual performance, the specialists are more attracted towards the task but do not perform quicker the task. This could be implemented, although it does not appear to be a necessary condition for DOL, since the performance of colony increases as a result of sensitisation. Simultaneity (concurrence) of tasks over period of time of self-regulation is achieved through spatial dependence of strength of stimulus. Flexibility in task switching is achieved through forgetting. A concrete interpretation of AFM in an ant colony, along with simulation results can be found in \cite{Arcaute+2008}.
%%
\subsection{Interpretation of AFM in a human society}
The interpretation of AFM  in a human society can be made using many different approaches. For example the following can be mapped to different nodes and characteristics of AFM in a human society.
Source nodes (o) can be resources\\
Agents (x) can be people\\
The links correspond to the flow of information, resources, etc.\\
The distance dependence can be introduced here in the same way as with the ants. People working in a certain area are more likely to receive info/resources with respect to that area, than another person doing something else. How the person uses that info/resources, corresponds to the people's ability to contribute towards a given goal, defined by the informal network. \\
The weight of the link is the amount of info a person gets. The person can use it or dismiss it. Random walking in the ants would correspond to dismiss it. AFM does not differentiate between good and bad info, it is only considered as good. 
%%
\subsection{Interpretation of AFM in a MRS}
The interpretation of AFM in a MRS also follows almost exactly as in generic interpretation. However, in order to make the interpretation more concrete, let us consider a manufacturing shop floor scenario where N number of mobile robots are required to attend to M number of shop tasks spread over a fixed area A. Let these tasks be represented by a set of small rectangular boxes resembling to manufacturing machines.
Let $R$ be the set of robots ${r_1, r_2,...,r_i}$ and $J$ the set of tasks ${t_1, t_2,...,t_j}$.
Each task $t_j$ has an associated task-urgency $\phi_j$ indicating its relative importance over time.
If a robot attends a task $t_j$ in the x$^{th}$ time-step, the value of $\phi_j$ will decrease by an amount $\delta_\phi$ in the (x+1)$^{th}$ time-step.
On the other hand, if a task has not been served by any robot in the x$^{th}$ time-step, $\phi_j$ will increase by another amount in (x+1)$^{th}$ time-step.
In order to complete a task $t_1$, a robot $r_i$ needs to be within a fixed boundary $D_{j1}$ of $t_1$.
If a robot completes a task $t_j$ it gets sensitised to it and this will increase the robot's likelihood of selecting that task in the future.
We call this variable the affinity of a robot $r_i$ to task $t_j$ its {\em sensitization} $k_{j}^{i}$.
If a robot does not do a task $t_j$ for some time, it forgets about $t_j$ and $k_j$ is decreased.\\
According to AFM, all robots will establish attractive fields to all tasks due to the presence of a system-wide continuous flow of information.
The strength of these attractive fields will vary according to the distances between robots and tasks, task-urgencies and corresponding sensitizations, $S_{i,j}$ of robots. This is encoded in Eq. \ref{eqn1}.
%\addtolength{\abovedisplayskip}{-15mm}
%\begin{small}
\begin{multicols}{2}
\begin{equation}
S_{j}^{i} = tanh\{\frac{k_{j}^{i}}{d_{ij}+\delta } \phi _{j}\}
\label{eqn1}
\end{equation}
\vspace*{0.25cm}
\begin{equation}
P_{j}^{i} = \frac{S_{j}^{i}}{\sum_{j}^{}S_{j}^{i}}
\label{eqn2}
\end{equation}
\end{multicols}
%\end{small}
%\addtolength{\belowdisplayskip}{-1mm}
%\vspace{2mm}
Eq. \ref{eqn1} states that the stimuli of a robot $i$ to a particular task $j$, $S_{j}^{i}$ depends on $i$'s spatial distance to $j$ ($d_{ij}$), level of sensitization to $j$ ($k_{j}^{i}$), and perceived urgency of that task ($\phi _{j}$). We use a very small constant value $\delta$ to avoid division by zero when a robot has reached a task. Since $S_{j}^{i}$ is a probability function, it is chosen as a $tanh$ in order
to keep the values between 0 and 1. The probability of selecting each task has been determined by a probabilistic method outlined in Eq. \ref{eqn2}.
AFM suggests that concurrency of a self-regulatory system can be maintained by specifying at least two task options: doing a task and not doing a task. In robots, the latter can be be treated as random walking. So in any time-step a robot will choose from M+1 tasks. Let $T_a$ be the allocated time to accomplish a task. If $R_1$ can enter inside the task boundary within $T_a$ time it waits there until $T_a$ elapsed. Otherwise it will select a different task.
%%
\begin{figure}
\centering
\includegraphics[width=12cm, angle=0]
{./images/VSP.eps}
%figure caption is below the figure
\caption{\small Virtual Shop-floor production and maintenance cycle}
\label{fig:vsp}  % Give a unique label
\end{figure}
%%
\subsection{A case study: virtual manufacturing shop-floor}
\label{sec:afm:vms}
In our virtual manufacturing shop-floor (VMS) scenario, each task represents a manufacturing machine. These machines are capable of producing goods from raw materials, but they also require constant maintenance works for stable operations. Let $W_{j}$ be a finite number of material parts that can be loaded into a machine $j$ in the beginning of its production process and in each time-step, $\omega_{j}$ units of material parts can be processed  ($\omega_{j} \ll W_{j} $). So let $\Omega_{j}^{p}$ be the initial production workload of $j$ which is simply: $W_{j} / \omega_{j}$ unit. We assume that all machines are identical. In each time step, each machine always requires a minimum threshold number of robots, called hereafter as {\em minimum robots per machine ($\mu$)}, to meet its constant maintenance work-load, $\Omega_{j}^{m}$ unit. However, if $\mu$ or more robots are present in a machine for production purpose, we assume that, no extra robot is required to do its maintenance work separately. These robots, along with their production jobs, can do necessary maintenance works concurrently. For the sake of simplicity, in this paper we consider $\mu$ = 1.
Now let us fit the above production and maintenance work-loads and task performance of robots into a unit task-urgency scale. Let us divide our manufacturing operation into two subsequent stages: 1) {\em production and maintenance mode (PMM)}, and 2) {\em maintenance only mode (MOM)}. Initially a machine starts working in PMM and does production and maintenance works concurrently. When there is no production work left, it then enters into MOM. Fig. \ref{fig:vsp} illustrates this for a single machine.
Under both modes, let $\alpha_{j}$ be the amount of workload occurs in a unit time-step if no robot serves a task and it corresponds to a fixed task-urgency $\Delta \phi_{INC}$. On the other hand, let us assume that in each time-step, a robot, $i$, can decrease a constant workload $\beta_{i}$ by doing some maintenance work along with doing any available production work. This  corresponds to a negative task urgency: $- \Delta \phi_{DEC}$. 
So, at the beginning of production process, task-urgency, occurred in a machine due to its production work-loads, can be encoded by Eq. \ref{eqn:task-urgency-prod-init}.
\begin{equation}
%\small
\Phi_{j, INIT}^{PMM} = \Omega_{j}^{p} \times \Delta \phi_{INC} + \phi_{j}^{m0}
\label{eqn:task-urgency-prod-init}
\end{equation}
where $\phi_{j}^{m0}$ represents the task-urgency due to any initial maintenance work-load of $j$.
Now if no robot attends to serve a machine, each time-step a constant maintenance workload of $\alpha_{j}^{m}$ will be added to $j$ and that will increase its task-urgency by $\Delta \phi_{INC}$. So, if k time steps passes without any production work being done, task urgency at $k^{th}$ time-step will follow Eq. \ref{eqn:task-urgency-prod-case1}.
\begin{equation}
\Phi_{j, k}^{PMM} =\Phi_{j, INIT}^{PMM} + k \times \Delta \phi_{INC}
\label{eqn:task-urgency-prod-case1}
\end{equation}
However, if a robot attends to a machine and does some production works from it, there would be no extra maintenance work as we assumed that $\mu$ = 1. Rather, the task-urgency on this machine will decrease by $\Delta \phi_{DEC}$ amount. If $\nu_{k}$ robots work on a machine simultaneously at time-step $k$, this decrease will be: $\nu_{k} \times \Delta \phi_{DEC}$. So in such cases, task-urgency in $(k+1)^{th}$ time-step can be represented by:
\begin{equation}
\Phi_{j, k+1}^{PMM} = \Phi_{j, k}^{PMM} - \nu_{k} \times \Delta \phi_{DEC}
\label{eqn:task-urgency-prod-case2}
\end{equation}
At a particular machine $j$, once $\Phi_{j, k}^{PMM}$ reaches to zero, we can say that there is no more production work left and this time-step $k$ can give us the {\em production completion time} of $j$, $T_{j}^{PMM}$. Average production time-steps of a shop-floor with M machines can be calculated by the following simple equation.
\begin{equation}
T_{avg}^{PMM} = \frac{1}{M} \sum_{j=0}^{M} T_{j}^{PMM} 
\label{eqn:avg-pmm}
\end{equation}
$T_{avg}^{PMM}$ can be compared with the minimum number of time-steps necessary to finish production works, $T_{min}^{PMM}$. This can only happen in an ideal case where all robots work for production without any random walking or failure. We can get $T_{min}^{PMM}$ from the total amount of work load and maximum possible inputs from all robots. If there are M machines and N robots, each machine has $\Phi_{INIT}^{PMM}$ task-urgency, and each time-step robots can decrease N $\times$ $\Delta \phi_{DEC}$ task-urgencies, then the theoretical $T_{min}^{PMM}$ can be found from the following Eq. \ref{eqn:min-pmm}.
%
\begin{multicols}{2}
\small
\begin{equation}
T_{min}^{PMM} = \frac{M \times \Phi_{INIT}^{PMM}}{N \times \Delta \phi_{DEC}} 
\label{eqn:min-pmm}
\end{equation}
\vspace*{0.2cm}
\begin{equation}
\zeta_{avg}^{PMM} = \frac{T_{avg}^{PMM} - T_{min}^{PMM}}{T_{min}^{PMM}} 
\label{eqn:appd}
\end{equation}
\end{multicols}
Thus we can define $\zeta_{avg}^{PMM}$, {\em average production completion delay} (APCD) by following Eq. \ref{eqn:appd}:
%%
When a machine enters into MOM, only $\mu$ robots are required to do its maintenance works in each time step. So, in such cases, if no robot serves a machine, the growth of task-urgency will follow Eq. \ref{eqn:task-urgency-prod-case1}. However, if $\nu_{k}$ robots are serving this machine at a particular time-step $k^{th}$ , task-urgency at $(k+1)^{th}$ time-step can be represented by:
\begin{equation}
\Phi_{j, k+1}^{MOM} = \Phi_{j, k}^{MOM}- (\nu_{k} - \mu) \times \Delta \phi_{DEC}
\label{eqn:task-urgency-maint-case}
\end{equation}
By considering $\mu = 1$ Eq. \ref{eqn:task-urgency-maint-case} will reduces to Eq. \ref{eqn:task-urgency-prod-case2}. Here, $\Phi_{j, k+1}^{MOM}$ will correspond to the {\em pending maintenance work-load (PMW)} of a particular machine at a given time. This happens due to the random task switching of robots with a no-task option (random-walking). Interestingly PMW will indicate the robustness of this system since higher PMW value will indicate the delay in attending maintenance works by robots. We can find the average PMW (APMW) per time-step per machine, $\chi_{j}^{MOM}$ (Eq. \ref{eqn:sigle-pmw}) and average PMW per machine per time-step, $\chi_{avg}^{MOM}$ (Eq. \ref{eqn:avg-pmw}).
\begin{multicols}{2}
\small
\begin{equation}
\chi_{j}^{MOM}= \frac{1}{K} \sum_{k=1}^{K} \Phi_{j, k}^{MOM}
\label{eqn:sigle-pmw}
\end{equation}
\vspace*{0.2cm}
\begin{equation}
\chi_{avg}^{MOM}= \frac{1}{M} \sum_{j=1}^{M} {\chi_{j}^{MOM}}
\label{eqn:avg-pmw}
\end{equation}
\end{multicols}
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
\section{Implementation}
\label{sec:impl}
\begin{figure}
\centering
\includegraphics[height=5cm, angle=0]
{./images/RIL-Expt-Setup1.eps}
%figure caption is below the figure
\caption{\small Hardware and software setup}
\label{fig:setup} % Give a unique label
\end{figure}
We have developed a system a multi-robot tracking system can track at least 40 E-puck robots \footnote{www.e-puck.org} and these robots can operate together according to the generic rules of the AFM.
As shown in Fig. \ref{fig:setup}, our software system consists of a multi-robot tracking system, a centralized task server and robot controller clients. Here at first we have presented the design of our communication system. Then we have discussed about our specific implementation. 
%%%
\subsection{Design of communication system}
In order to establish a system-wide continuous flow of information, we need to implement a suitable communication system for our robots. Here we have presented a centralized communication system for our manufacturing shop-floor scenario.
%% 
As shown in Fig. \ref{fig:ccm}, in this model there exists a centralized \textit{
TaskServer} that is responsible for disseminating task information to robots. The contents of task information can be physical locations of tasks, their urgencies and so on. TaskServer delivers this information by emitting \textit{TaskInfo} signals periodically. The method of signal emission depends on a particular communication technology. For example, in a wireless network it can be a message broadcast.
Task-Server has another interface for catching feedback signals from robots. The \textit{RobotStatus} signal can be used to inform TaskServer about a robot's current task id, its device status and so on. TaskServer uses this information to update relevant part of task information such as, task-urgency. This up-to-date information is sent in next TaskInfo signal.\\
In Fig. \ref{fig:ccm} an initial configuration of this model has been presented. Upon receiving an initial TaskInfo signal robot $R_1$ has shown strong attraction towards $Task1$ and robot $R_3$ has shown strong attraction toward $Task2$. This can be inferred from Eq. \ref{eqn1} that says if the initial task urgencies and sensitizations for all tasks are same, a robot will strongly be attracted towards a task that is relatively closer to it.
\subsection{MRS implementation}
The major components of our implementation are a multi-robot tracking system, robot controller clients and a centralized task-server. In order to track all robots real-time we have used SwisTrack \cite{SwisTrack}, a state of the art open-source, multi-agent tracking system, with a16-megapixel overhead GigE camera. This set-up gives us the position, heading and id of each of the robots at a frequency of 1. The interaction of the hardware and software of our system is illustrated in Fig. \ref{fig:setup}. \\
For inter-process communication (IPC), we have used D-Bus technology \footnote{http://dbus.freedesktop.org/doc/dbus-specification.html}. We have developed an IPC component for SwisTrack (hereafter called as \textit{SwisTrack D-Bus Server}) that can broadcast id and pose of all robots in real-time over our server's D-Bus interface.\\
Apart from SwisTrack, we have implemented two major software modules: {\em TaskServer} and {\em Robot Controller Client (RCC)}. They are developed in Python with its state of the art \textit{Multiprocessing} \footnote{http://docs.python.org/library/multiprocessing.html} module. This python module simplifies our need to manage data sharing and synchronization among different sub-processes. As shown in Fig. \ref{fig:setup}, RCC consists of four sub-processes. {\em SignalListener} and {\em SignalEmitter}, interface with SwisTrack D-Bus Server and TaskServer respectively. {\em TaskSelector} implements AFM guidelines for task selection . {\em DeviceController} moves a robot to a target task. Bluetooth radio link is used as a communication medium between a RCC and a corresponding E-puck robot. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Experiment design}
\label{sec:expt-design}
In this section, we have described the design of parameters and observables of our experiments within the context of our virtual manufacturing shop-floor scenario. 
These experiments are designed to validate AFM by testing the presence of division of labour, such task specialization, dynamic task-switching or plasticity etc. 
\begin{table}
\caption{Experimental parameters}
\label{table:params}
\begin{center}
\begin{tabular}{|l||c|}
\hline Parameter & Value\\
\hline Total number of robots ($N$) & 16\\
\hline Total number of tasks ($M$) & 4\\
\hline Experiment area ($A$) & 4 $m^2$\\
\hline Initial production work-load/machine ($\Omega_{j}^{p}$) & 100 unit\\
\hline Task urgency increase rate ($\Delta\phi_{INC}$) & 0.005\\
\hline Task urgency decrease rate ($\Delta\phi_{DEC}$) & 0.0025\\
\hline Initial sensitization ($K_{INIT}$) & 0.1\\
\hline Sensitization increase rate ($\Delta k_{INC}$) & 0.03\\
\hline Sensitization decrease rate ($\Delta k_{DEC}$) & 0.01\\
\hline
\end{tabular}
\end{center}
\end{table}
% 
\subsection{Parameters}
Table \ref{table:params} lists a set of essential parameters of our experiments. We intend to have a setup that is relatively complex, i.e., with a high number of robots and tasks in a large area. The diameter of the marker of our e-puck robot is 0.08m. So, if we put 4 robots in an area of one square meter, this will give us a robot-occupied-space to free-space ratio of about 1:49 per square meter. This ratio reasonable in order to allow the robots to move at a speed of 5 cm/sec  without much interference to each other. We have fixed the number of tasks to 4. Robots also have an additional option for random walking that corresponds to the ignoring task information for ensuring flexibility of our system.\\
The initial values of task urgencies correspond to 100 units of production work-load without any maintenance work-load as outlined in Eq. \ref{eqn:task-urgency-prod-init}. We choose a limit of 0 and 1, where 0 means no urgency and 1 means maximum urgency. Same applies to sensitisation as well, where 0 means no sensitisation and 1 means maximum sensitisation. This also implies that if sensitization is 0, task has been forgotten completely. On the other hand, if sensitization is 1, the task has been learnt completely. We choose a default sensitization value of 0.1 
for all tasks. The following relationships are maintained for selecting task-urgency and sensitization parameters.
%\begin{small}
\begin{equation}
\small
\Delta\phi_{INC} =  \frac{\Delta\phi_{DEC} \times N}{2 \times M}
\label{eqn:task-urgency}
\end{equation}
%
\begin{equation}
\small
\Delta k_{DEC} = \frac{\Delta k_{INC}} {M - 1} 
\label{eqn:sensitization}
\end{equation}
%\end{small}
%
Eq. \ref{eqn:task-urgency} establishes the fact that task urgency will increase at a higher rate than that of its decrease. As we do not like to keep a task left unattended for a long time we choose a higher rate of increase of task urgency. This difference is set on the basis of our assumption that at least half of the expected number of robots (ratio of number of robots to tasks) would be available to work on a task. So they would produce similar types of increase and decrease behaviours in task urgencies.
Eq. \ref{eqn:sensitization} suggests that the learning will happen much faster than the forgetting. The difference in these two rates is based on the fact that faster leaning gives a robot more chances to select  a task in next time-step and thus it becomes more specialized on it.  Task-Server updates task-info messages in the interval of $\Delta TS_u$=5s and robots stick on to a particular task for a maximum of  $\Delta RT_{to}$=10s.
\subsection{Observables}
We have defined a set of observables to evaluate our implementation. The first two observables, the changes in task-urgencies and the changes in active worker ratios, can give us an overall view of plasticity of division labour. Our third observable is to find changes in robot task specialization which is also an important measure of division of labour. Our last measurement is the communication load which is specific to this particular implementation and corresponds to the continuous flow of information. Within the context of our VMS, we measure the average production completion delay (APCD) and average pending maintenance work (APMW) as the metrics of VMS performance.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 
\section{Results and discussions}
\label{sec:results}
%%
In this section we have presented our experimental results. We ran those experiments for about 40 minutes and averaged them over five iterations.
Fig. \ref{fig:raw-urgencies} shows the dynamic changes in task urgencies.  In order to describe our system's dynamic behaviour holistically we analyse the changes in task urgencies over time. Let $ \phi_{j, q}$ be the urgency of a task $j$ at $q^{th}$ step and $\phi_{j, q+1}$ be the task urgency of $(q+1)^{th}$ step. We can calculate the sum of changes in urgencies of all tasks at $(q+1)^{th}$ step:
\begin{equation} 
\small
\Delta \Phi_{j, q+1} = \sum_{j=1}^{M} (\phi_{j, q+1} - \phi_{j, q})
\label{eqn:Delta-Phi}
\end{equation}
From Fig. \ref{fig:urgency-stat} we can see that initially the sum of changes of task urgencies are towards negative direction. This implies that tasks are being served by a high number of robots. Fig. \ref{fig:worker-stat} shows that in production stage, when  work-load is high, many robots are active in tasks and this ratio varies according to task urgency changes.\\ 
Fig. \ref{fig:single-robot-sensitizations} gives us the task specialization of five robots on Task3 in a particular run of our experiment. This shows us how our robots can specialize and de-specialize on tasks over time. The de-specialization or forgetting of tasks is calculated similar to Eq. \ref{eqn:Delta-Phi}. we have calculated the absolute sum of changes in sensitizations by all robots in the following equation.
% 
\begin{equation}
\small 
\Delta K_{j, q+1} = \sum_{j=1}^{M} \mid (k_{j, q+1} - k_{j, q}) \mid
\label{eqn:Delta-K}
\end{equation}
This values of $\Delta K$ are plotted in Fig. \ref{fig:sensitization-stat}. It shows that the overall rate of learning decreases and forgetting increases over time. It is a consequence of the gradually increased task specialization of robots and reduced task-urgencies over time.
%%
%%% Communication load %%%
Fig. \ref{fig:signal-frequency-stat} presents the frequency of signalling task information by TaskServer. Since the duration of each time step is 50s long and TaskServer emits signal in every 2.5s, there should be an average of 20 signals in each time-step.\\
Within VMS scenario, we have got average production completion time 165 time-steps (825s) where sample size is (5 x 4) =  20 tasks, SD = 72 time-steps (360s). According to Eq. \ref{eqn:min-pmm}, our theoretical minimum  production completion time is 50 time-steps (250s) assuming the non-stop task performance of all 16 robots with an initial task urgency of 0.5 for all 4 tasks and  task urgency decrease rate $\Delta \Phi_{DEC	}$ = 0.0025 per robot per time-step. Hence, Eq. \ref{eqn:appd} gives us APCD, $\zeta$ = 2.3 which means that our system has taken 2.3 times more time (575s) than the minimum estimated time.\\
Besides,  from the average 315 time-steps (1575s) maintenance activity of our robots per experiment run, we have got  APMW, $\chi$ = 0.012756  which corresponds to the pending work of 3 time-steps (15s) with sample-size = 20 tasks, SD = 13 time-steps (65s), $\Delta \Phi_{INC}$ = 0.005 per task per time-step. This tells us the robust task performance of our robots which can return to an abandoned task within a minute or so.
%%
\begin{figure}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4.5cm, angle=0]
{images/PlotUrgencyLog-2010May10-115549.eps}
%figure caption is below the figure
\caption{\small Task urgencies observed at TaskServer}
\label{fig:raw-urgencies} % Give a unique label
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4.5cm, angle=0]{images/TaskUrgencyStat.eps}
\caption{\small Shop-floor workload change history} % measured in terms of task urgencies
\label{fig:urgency-stat} % Give a unique label
\end{minipage}
\end{figure}
%%
%%% Sensitization and Translation %%%
\begin{figure}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4.5cm, angle=0]
{images/Global-SignalingFreqStat.eps}
%figure caption is below the figure
\caption{\small Task server's frequency of task information signalling}
\label{fig:signal-frequency-stat}
%
\end{minipage}
\hspace{0.5cm}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4.5cm, angle=0]{images/WorkerRatio.eps}
\caption{\small Self-organized allocation of workers }
\label{fig:worker-stat} % Give a unique label
\end{minipage}
\end{figure}
%%
\begin{figure}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4cm, angle=0]{images/TaskSpecialization-task3-10may-1.eps}
\caption{\small Task specialization on Task3}
\label{fig:single-robot-sensitizations} % Give a unique label
\end{minipage} 
%%%
\hspace{0.5cm}
\begin{minipage}[t]{0.48\linewidth}
\centering
\includegraphics[height=4.2cm, angle=0]
{images/RobotSensitizationStat-Total-50steps.eps}
\caption{\small Changes in sensitizations of all robots}
\label{fig:sensitization-stat} % Give a unique label
\end{minipage}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Summary and conclusion}
\label{sec:conc}
In this paper we have validated an inter-disciplinary generic model of self-regulated division of labour (DOL) or or multi-robot task allocation (MRTA) by incorporating it in our multi-robot system (MRS) that has emulated a virtual manufacturing shop-floor activities. A centralized communication system has been instantiated to realize this model. We have evaluated various aspects of this model, such as ability to meet dynamic task demands, individual task specializations, communication loads and flexibility in concurrent task completions. A set of metrics has been proposed to observe the DOL in this system. From our experimental results, we have found that AFM can meet the requirements of dynamic DOL by the virtue of its self-regulatory behaviours. Our centralised communication system broadcasts information to all the robots from a central server. This has the advantage of minimising the communication load and the disadvantage of a single point of failure. In the future, we will explore local peer-to-peer communication models in a MRS having about 40 E-puck robots.